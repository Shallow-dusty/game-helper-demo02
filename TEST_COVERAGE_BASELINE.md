# æµ‹è¯•è¦†ç›–ç‡åŸºçº¿æŠ¥å‘Š

**ç”Ÿæˆæ—¥æœŸ**: 2026-01-09
**é¡¹ç›®**: game-helper-demo02 v0.8.0
**é˜¶æ®µ**: é˜¶æ®µ2.1 - æµ‹è¯•è¦†ç›–ç‡åŸºçº¿è¯„ä¼°

---

## ğŸ“Š å½“å‰æµ‹è¯•çŠ¶æ€

### æµ‹è¯•æ‰§è¡Œæ¦‚å†µ

| æŒ‡æ ‡ | æ•°å€¼ | çŠ¶æ€ |
|------|------|------|
| **æµ‹è¯•æ–‡ä»¶æ€»æ•°** | 35 | - |
| **æµ‹è¯•æ–‡ä»¶é€šè¿‡** | 34 | âœ… 97.1% |
| **æµ‹è¯•æ–‡ä»¶å¤±è´¥** | 1 | âš ï¸ 2.9% |
| **æµ‹è¯•ç”¨ä¾‹æ€»æ•°** | 397 | - |
| **æµ‹è¯•ç”¨ä¾‹é€šè¿‡** | 390 | âœ… 98.2% |
| **æµ‹è¯•ç”¨ä¾‹å¤±è´¥** | 7 | âš ï¸ 1.8% |
| **æœªå¤„ç†é”™è¯¯** | 1 | âš ï¸ |

**æ€»ä½“è¯„ä¼°**: ğŸŸ¢ è‰¯å¥½ï¼ˆ98.2%é€šè¿‡ç‡ï¼‰

---

## âŒ å¤±è´¥çš„æµ‹è¯•åˆ†æ

### 1. useSoundEffect.test.ts (7ä¸ªå¤±è´¥æµ‹è¯•)

**é—®é¢˜ç±»å‹**: æµ‹è¯•è®¾ç½®é—®é¢˜ (Mocké…ç½®ä¸å®Œæ•´)

**é”™è¯¯ä¿¡æ¯**:
```
TypeError: Cannot read properties of undefined (reading 'categories')
at Object.playSound src/hooks/useSoundEffect.ts:116:24
```

**å¤±è´¥æµ‹è¯•åˆ—è¡¨**:
1. should play sound when not blocked
2. should respect custom volume option
3. should apply master volume from store
4. should handle edge case volumes
5. should stop all sounds
6. should have playClockTick function that calls internally
7. should cleanup on unmount

**æ ¹æœ¬åŸå› **: æµ‹è¯•ä¸­çš„ `audioSettings` mock æœªæ­£ç¡®è®¾ç½® `categories` å±æ€§

**ä¿®å¤ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ç­‰ï¼ˆåŠŸèƒ½æ€§æµ‹è¯•ï¼Œä½†ä¸å½±å“æ ¸å¿ƒé€»è¾‘ï¼‰

**ä¿®å¤æ–¹æ¡ˆ**:
```typescript
// åœ¨æµ‹è¯•æ–‡ä»¶ä¸­æ·»åŠ å®Œæ•´çš„audioSettings mock
const mockAudioSettings = {
  categories: {
    ambient: true,
    action: true,
    ui: true,
    secret: true,
  },
  masterVolume: 0.7,
  // ... å…¶ä»–å±æ€§
};
```

### 2. createConnectionSlice.test.ts (1ä¸ªæœªå¤„ç†é”™è¯¯)

**é—®é¢˜ç±»å‹**: å¼‚æ­¥æ¸…ç†é—®é¢˜

**é”™è¯¯ä¿¡æ¯**:
```
TypeError: Cannot read properties of undefined (reading 'push')
at addSystemMessage src/store/utils.ts:96:24
at Timeout._onTimeout src/store/slices/createConnectionSlice.ts:176:21
```

**æ ¹æœ¬åŸå› **: æµ‹è¯•æ¸…ç†æ—¶ï¼ŒsetTimeoutå›è°ƒå°è¯•è®¿é—®å·²å¸è½½çš„gameState

**ä¿®å¤ä¼˜å…ˆçº§**: ğŸŸ¢ é«˜ï¼ˆå¯èƒ½å¯¼è‡´æµ‹è¯•ä¸ç¨³å®šï¼‰

**ä¿®å¤æ–¹æ¡ˆ**:
```typescript
// åœ¨æµ‹è¯•teardownä¸­ç¡®ä¿æ¸…ç†æ‰€æœ‰timers
afterEach(() => {
  vi.clearAllTimers();
  vi.restoreAllMocks();
});
```

---

## ğŸ“ æµ‹è¯•æ–‡ä»¶åˆ†å¸ƒ

### src/lib æ ¸å¿ƒé€»è¾‘æµ‹è¯• (7ä¸ªæ–‡ä»¶)

| æ–‡ä»¶ | çŠ¶æ€ | æµ‹è¯•æ•° | ä¼˜å…ˆçº§ |
|------|------|--------|--------|
| `chainReaction.test.ts` | âœ… Pass | 22 | ğŸ”´ P0 |
| `distributionAnalysis.test.ts` | âœ… Pass | 16 | ğŸ”´ P0 |
| `gameLogic.test.ts` | âœ… Pass | - | ğŸ”´ P0 |
| `infoGeneration.test.ts` | âœ… Pass | - | ğŸ”´ P0 |
| `reportGenerator.test.ts` | âœ… Pass | - | ğŸ”´ P0 |
| `supabaseService.test.ts` | âœ… Pass | - | ğŸ”´ P0 |
| `tests/gameLogic.extra.test.ts` | âœ… Pass | 18 | ğŸ”´ P0 |

**æ€»è®¡**: 56+ æµ‹è¯•ç”¨ä¾‹ï¼Œ100% é€šè¿‡ç‡
**è¦†ç›–ç‡ä¼°è®¡**: ~75-80% ï¼ˆéœ€è¯¦ç»†æŠ¥å‘Šç¡®è®¤ï¼‰

### src/store çŠ¶æ€ç®¡ç†æµ‹è¯• (6ä¸ªæ–‡ä»¶)

| æ–‡ä»¶ | çŠ¶æ€ | æµ‹è¯•æ•° | ä¼˜å…ˆçº§ |
|------|------|--------|--------|
| `createGameSlice.test.ts` | âœ… Pass | 9 | ğŸ”´ P1 |
| `createUISlice.test.ts` | âœ… Pass | 13 | ğŸ”´ P1 |
| `createConnectionSlice.test.ts` | âš ï¸ Error | - | ğŸ”´ P1 |
| `game/core.test.ts` | âœ… Pass | 15 | ğŸ”´ P1 |
| `game/flow.test.ts` | âœ… Pass | 21 | ğŸ”´ P1 |
| `game/roles.test.ts` | âœ… Pass | 18 | ğŸ”´ P1 |
| `game/utils.test.ts` | âœ… Pass | 18 | ğŸ”´ P1 |

**æ€»è®¡**: 94+ æµ‹è¯•ç”¨ä¾‹ï¼Œ94% é€šè¿‡ç‡ï¼ˆ1ä¸ªé”™è¯¯ï¼‰
**è¦†ç›–ç‡ä¼°è®¡**: ~70-75% ï¼ˆéœ€æå‡åˆ°85%+ï¼‰

### src/hooks é’©å­æµ‹è¯• (4ä¸ªæ–‡ä»¶)

| æ–‡ä»¶ | çŠ¶æ€ | æµ‹è¯•æ•° | ä¼˜å…ˆçº§ |
|------|------|--------|--------|
| `useActionConfirmation.test.ts` | âœ… Pass | 9 | ğŸŸ¡ P2 |
| `useGameInteractions.test.ts` | âœ… Pass | 9 | ğŸŸ¡ P2 |
| `useNomination.test.ts` | âœ… Pass | - | ğŸŸ¡ P2 |
| `useSoundEffect.test.ts` | âŒ Fail | 18 (7å¤±è´¥) | ğŸŸ¡ P2 |
| `useLongPress.test.ts` | âœ… Pass | - | ğŸŸ¡ P2 |

**æ€»è®¡**: 36+ æµ‹è¯•ç”¨ä¾‹ï¼Œ81% é€šè¿‡ç‡
**è¦†ç›–ç‡ä¼°è®¡**: ~60-65% ï¼ˆéœ€æå‡åˆ°70%+ï¼‰

### src/components/game æ¸¸æˆç»„ä»¶æµ‹è¯• (18ä¸ªæ–‡ä»¶)

| æ–‡ä»¶ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|------|------|--------|
| `ActionConfirmModal.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `ActiveAbilityButton.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `CandlelightOverlay.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `ChainReactionModal.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `Confetti.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `CorruptionOverlay.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `DeathEchoEffect.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `DoomsdayClock.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `FloatingNote.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `FloatingVoteButton.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `GhostlyVisionOverlay.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `JudgmentZone.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `NightActionPanel.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `PhaseIndicator.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `RoleCard.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `StorytellerMenu.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `SwapRequestModal.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `TownSquare.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `TruthReveal.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `VoteButton.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `VotingChart.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `WaitingArea.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |
| `WelcomeAnnouncement.test.tsx` | âš ï¸ Warning | ğŸŸ¡ P3 |
| `WhisperingFog.test.tsx` | âœ… Pass | ğŸŸ¡ P3 |

**æ€»è®¡**: 200+ æµ‹è¯•ç”¨ä¾‹ï¼Œ~98% é€šè¿‡ç‡
**è¦†ç›–ç‡ä¼°è®¡**: ~50-60% ï¼ˆç›®æ ‡50-70%ï¼‰

---

## ğŸ“ˆ è¦†ç›–ç‡ä¼°è®¡ï¼ˆåŸºäºæµ‹è¯•æ–‡ä»¶å’Œç”¨ä¾‹æ•°ï¼‰

### æŒ‰ä¼˜å…ˆçº§åˆ†ç±»

| å±‚çº§ | ç›®æ ‡ | ä¼°è®¡å½“å‰ | å·®è· | çŠ¶æ€ |
|------|------|----------|------|------|
| **ğŸ”´ P0: æ ¸å¿ƒé€»è¾‘ (lib/)** | 90%+ | ~75-80% | 10-15% | ğŸŸ¡ éœ€æå‡ |
| **ğŸ”´ P1: çŠ¶æ€ç®¡ç† (store/)** | 85%+ | ~70-75% | 10-15% | ğŸŸ¡ éœ€æå‡ |
| **ğŸŸ¡ P2: Hooks (hooks/)** | 70%+ | ~60-65% | 5-10% | ğŸŸ¡ éœ€æå‡ |
| **ğŸŸ¡ P3: ç»„ä»¶ (components/)** | 50-70% | ~50-60% | 0-10% | ğŸŸ¢ æ¥è¿‘ç›®æ ‡ |

### æ€»ä½“è¦†ç›–ç‡ä¼°è®¡

**ä¿å®ˆä¼°è®¡**: 65-70%
**ä¹è§‚ä¼°è®¡**: 70-75%
**ç›®æ ‡**: 80%+
**å·®è·**: 10-15%

---

## ğŸ¯ é˜¶æ®µ2æ”¹è¿›ç›®æ ‡

### 2.2 æ ¸å¿ƒé€»è¾‘æµ‹è¯•å¢å¼ºï¼ˆP0ï¼Œç›®æ ‡90%+ï¼‰

**éœ€è¦å¢å¼ºçš„æ¨¡å—**:

1. **gameLogic.ts**
   - âœ… åŸºç¡€æµ‹è¯•ï¼š18ä¸ªæµ‹è¯•ï¼ˆgameLogic.extra.test.tsï¼‰
   - â“ ç¼ºå¤±æµ‹è¯•ï¼š
     - å¤æ‚æ¸¸æˆç»“æŸåœºæ™¯ï¼ˆåœ£å¾’è¢«å¤„å†³ã€å¸‚é•¿å­˜æ´»ç­‰ï¼‰
     - ç‰¹æ®Šè§’è‰²äº¤äº’ï¼ˆé…’é¬¼ã€ç–¯å­ã€é­”å¶ï¼‰
     - è¾¹ç•Œæ¡ä»¶ï¼ˆ0ç©å®¶ã€å…¨æ­»ã€å•äººå­˜æ´»ï¼‰
   - **éœ€è¦æ–°å¢**: 10-15ä¸ªæµ‹è¯•ç”¨ä¾‹

2. **chainReaction.ts**
   - âœ… åŸºç¡€æµ‹è¯•ï¼š22ä¸ªæµ‹è¯•
   - â“ ç¼ºå¤±æµ‹è¯•ï¼š
     - å¤æ‚è¿é”åœºæ™¯ï¼ˆ3+å±‚è¿é”ï¼‰
     - å¾ªç¯ä¾èµ–æ£€æµ‹
     - æ€§èƒ½æµ‹è¯•ï¼ˆå¤§é‡è§’è‰²ï¼‰
   - **éœ€è¦æ–°å¢**: 5-8ä¸ªæµ‹è¯•ç”¨ä¾‹

3. **supabaseService.ts**ï¼ˆé‡ç‚¹ï¼‰
   - âœ… åŸºç¡€æµ‹è¯•ï¼šå­˜åœ¨ä½†è¦†ç›–ç‡æœªçŸ¥
   - â“ ç¼ºå¤±æµ‹è¯•ï¼š
     - æ‰€æœ‰RPCè°ƒç”¨çš„mockæµ‹è¯•
     - é”™è¯¯å¤„ç†è·¯å¾„
     - é‡è¯•é€»è¾‘
     - è¶…æ—¶å¤„ç†
   - **éœ€è¦æ–°å¢**: 15-20ä¸ªæµ‹è¯•ç”¨ä¾‹

4. **infoGeneration.ts**
   - âœ… åŸºç¡€æµ‹è¯•ï¼šå­˜åœ¨
   - â“ ç¼ºå¤±æµ‹è¯•ï¼š
     - æ‰€æœ‰è§’è‰²çš„ä¿¡æ¯ç”Ÿæˆ
     - å¼‚å¸¸è¾“å…¥å¤„ç†
     - AIæœåŠ¡mock
   - **éœ€è¦æ–°å¢**: 10-15ä¸ªæµ‹è¯•ç”¨ä¾‹

5. **distributionAnalysis.ts**
   - âœ… åŸºç¡€æµ‹è¯•ï¼š16ä¸ªæµ‹è¯•
   - â“ ç¼ºå¤±æµ‹è¯•ï¼š
     - æ‰€æœ‰å‰§æœ¬é…ç½®ï¼ˆæš—æµæ¶ŒåŠ¨ã€é‚ªæ¶æœˆå‡ã€æ•™æ´¾æš´åŠ›ï¼‰
     - è§’è‰²åˆ†å¸ƒç®—æ³•éªŒè¯
     - è¾¹ç•Œæ¡ä»¶ï¼ˆäººæ•°ä¸è¶³ã€è¿‡å¤šï¼‰
   - **éœ€è¦æ–°å¢**: 8-12ä¸ªæµ‹è¯•ç”¨ä¾‹

6. **reportGenerator.ts**
   - âœ… åŸºç¡€æµ‹è¯•ï¼šå­˜åœ¨
   - â“ ç¼ºå¤±æµ‹è¯•ï¼š
     - æˆ˜æŠ¥ç”Ÿæˆçš„å„ç§åœºæ™¯
     - æ•°æ®æ ¼å¼éªŒè¯
   - **éœ€è¦æ–°å¢**: 5-8ä¸ªæµ‹è¯•ç”¨ä¾‹

**æ€»è®¡éœ€æ–°å¢**: 53-78ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œé¢„è®¡æå‡è¦†ç›–ç‡15-20%

### 2.3 çŠ¶æ€ç®¡ç†æµ‹è¯•å¢å¼ºï¼ˆP1ï¼Œç›®æ ‡85%+ï¼‰

**éœ€è¦å¢å¼ºçš„æ¨¡å—**:

1. **flow.ts**ï¼ˆæœ€å¤æ‚ï¼Œä¼˜å…ˆï¼‰
   - âœ… åŸºç¡€æµ‹è¯•ï¼š21ä¸ªæµ‹è¯•
   - â“ ç¼ºå¤±æµ‹è¯•ï¼š
     - æ‰€æœ‰é˜¶æ®µè½¬æ¢ï¼ˆSETUPâ†’NIGHTâ†’DAYâ†’VOTINGâ†’EXECUTIONï¼‰
     - å¤œé—´é˜Ÿåˆ—ç”Ÿæˆï¼ˆé¦–å¤œ/å…¶ä»–å¤œæ™šï¼‰
     - æŠ•ç¥¨é€»è¾‘ï¼ˆæ ‡å‡†/æ—¶é’ˆæŠ•ç¥¨ï¼‰
     - å¤„å†³æµç¨‹
     - çƒ›å…‰æ¨¡å¼åˆ‡æ¢
     - äº¤äº’æ—¥å¿—è®°å½•
   - **éœ€è¦æ–°å¢**: 15-20ä¸ªæµ‹è¯•ç”¨ä¾‹

2. **roles.ts**
   - âœ… åŸºç¡€æµ‹è¯•ï¼š18ä¸ªæµ‹è¯•
   - â“ ç¼ºå¤±æµ‹è¯•ï¼š
     - åŒé‡èº«ä»½ç³»ç»Ÿï¼ˆrealRoleId/seenRoleIdï¼‰
     - è§’è‰²æ›´æ¢è¾¹ç•Œæ¡ä»¶
     - æ­»äº¡çŠ¶æ€å¤„ç†
   - **éœ€è¦æ–°å¢**: 8-12ä¸ªæµ‹è¯•ç”¨ä¾‹

3. **core.ts**
   - âœ… åŸºç¡€æµ‹è¯•ï¼š15ä¸ªæµ‹è¯•
   - â“ ç¼ºå¤±æµ‹è¯•ï¼š
     - æˆ¿é—´åˆ›å»ºå’ŒåŠ å…¥çš„æ‰€æœ‰è·¯å¾„
     - åº§ä½åŸå­å…¥åº§è¾¹ç•Œæ¡ä»¶
     - ç¦»çº¿æ¨¡å¼åˆ‡æ¢
   - **éœ€è¦æ–°å¢**: 10-15ä¸ªæµ‹è¯•ç”¨ä¾‹

4. **createConnectionSlice.ts**ï¼ˆéœ€ä¿®å¤é”™è¯¯ï¼‰
   - âš ï¸ å½“å‰çŠ¶æ€ï¼š1ä¸ªæœªå¤„ç†é”™è¯¯
   - éœ€è¦ï¼šä¿®å¤å¼‚æ­¥æ¸…ç†é—®é¢˜
   - **éœ€è¦æ–°å¢**: 5-8ä¸ªæµ‹è¯•ç”¨ä¾‹

**æ€»è®¡éœ€æ–°å¢**: 38-55ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œé¢„è®¡æå‡è¦†ç›–ç‡15-20%

### 2.4 Hookså’Œç»„ä»¶æµ‹è¯•ï¼ˆP2-P3ï¼‰

**Hooksï¼ˆç›®æ ‡70%+ï¼‰**:
- **useSoundEffect.ts**: ä¿®å¤7ä¸ªå¤±è´¥æµ‹è¯•
- **useGameInteractions.ts**: è¡¥å……è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆ5ä¸ªç”¨ä¾‹ï¼‰
- **useNomination.ts**: è¡¥å……è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆ5ä¸ªç”¨ä¾‹ï¼‰

**ç»„ä»¶ï¼ˆç›®æ ‡50-70%ï¼‰**:
- å½“å‰çŠ¶æ€å·²æ¥è¿‘ç›®æ ‡
- é‡ç‚¹ï¼š`Grimoire.tsx`ï¼ˆæ ¸å¿ƒç»„ä»¶ï¼‰è¡¥å……é›†æˆæµ‹è¯•

**æ€»è®¡éœ€æ–°å¢/ä¿®å¤**: 17-25ä¸ªæµ‹è¯•ç”¨ä¾‹

---

## ğŸ“Š é¢„æœŸæ”¹è¿›æ•ˆæœ

### æµ‹è¯•ç”¨ä¾‹å¢é•¿

| é˜¶æ®µ | å½“å‰ç”¨ä¾‹æ•° | æ–°å¢ç”¨ä¾‹ | æ”¹è¿›åç”¨ä¾‹æ•° |
|------|-----------|---------|-------------|
| **é˜¶æ®µ2.2 (P0)** | ~56 | 53-78 | 109-134 |
| **é˜¶æ®µ2.3 (P1)** | ~94 | 38-55 | 132-149 |
| **é˜¶æ®µ2.4 (P2-P3)** | ~236 | 17-25 | 253-261 |
| **æ€»è®¡** | **386** | **108-158** | **494-544** |

### è¦†ç›–ç‡é¢„æœŸ

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ | é¢„æœŸè¾¾æˆ |
|------|------|------|----------|
| **æ ¸å¿ƒé€»è¾‘ (lib/)** | 75-80% | 90%+ | âœ… å¯è¾¾æˆ |
| **çŠ¶æ€ç®¡ç† (store/)** | 70-75% | 85%+ | âœ… å¯è¾¾æˆ |
| **Hooks (hooks/)** | 60-65% | 70%+ | âœ… å¯è¾¾æˆ |
| **ç»„ä»¶ (components/)** | 50-60% | 50-70% | âœ… å¯è¾¾æˆ |
| **æ€»ä½“è¦†ç›–ç‡** | 65-75% | 80%+ | âœ… å¯è¾¾æˆ |

---

## ğŸ”§ ç«‹å³ä¿®å¤é¡¹

### é«˜ä¼˜å…ˆçº§ï¼ˆé˜»å¡coverageç”Ÿæˆï¼‰

1. **ä¿®å¤ useSoundEffect.test.ts**ï¼ˆ7ä¸ªå¤±è´¥æµ‹è¯•ï¼‰
   - åŸå› ï¼šaudioSettings mockä¸å®Œæ•´
   - é¢„è®¡æ—¶é—´ï¼š15åˆ†é’Ÿ
   - å½±å“ï¼šè§£é™¤P2æµ‹è¯•é˜»å¡

2. **ä¿®å¤ createConnectionSlice.test.ts**ï¼ˆæœªå¤„ç†é”™è¯¯ï¼‰
   - åŸå› ï¼šå¼‚æ­¥æ¸…ç†é—®é¢˜
   - é¢„è®¡æ—¶é—´ï¼š20åˆ†é’Ÿ
   - å½±å“ï¼šæ¶ˆé™¤æµ‹è¯•ä¸ç¨³å®šæ€§ï¼Œè§£é™¤P1æµ‹è¯•é˜»å¡

**æ€»ä¿®å¤æ—¶é—´**: 30-40åˆ†é’Ÿ

### ä¸­ä¼˜å…ˆçº§ï¼ˆcoverageç”Ÿæˆåï¼‰

3. **ç”Ÿæˆå®Œæ•´coverageæŠ¥å‘Š**
   - ä¿®å¤ä¸Šè¿°2é¡¹åé‡æ–°è¿è¡Œ `npm run test:coverage`
   - éªŒè¯coverage/index.htmlç”Ÿæˆ
   - ä¿å­˜åŸºçº¿æŠ¥å‘Šå¿«ç…§

---

## ğŸ“ å¤‡æ³¨

### æµ‹è¯•æ¡†æ¶é…ç½®

```typescript
// vitest.config.ts coverage é…ç½®
coverage: {
  provider: 'v8',
  reporter: ['text', 'json', 'html'],
  include: [
    'src/lib/**/*.ts',           // ğŸ”´ æ ¸å¿ƒé€»è¾‘å±‚ (ç›®æ ‡ 90%+)
    'src/store/**/*.ts',         // ğŸ”´ çŠ¶æ€ç®¡ç†å±‚ (ç›®æ ‡ 90%+)
    'src/hooks/**/*.ts',         // ğŸŸ¡ äº¤äº’ hooks (ç›®æ ‡ 70%)
    'src/components/game/*.tsx', // ğŸŸ¡ æ¸¸æˆç»„ä»¶ (ç›®æ ‡ 50-70%)
  ],
  exclude: [
    'src/components/ui/**',      // âšª çº¯å±•ç¤ºç»„ä»¶ (ä¸æµ‹)
    '**/*.test.ts',
    '**/*.test.tsx',
  ],
}
```

### æµ‹è¯•å‘½ä»¤

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
npm run test:coverage

# æŸ¥çœ‹coverageæŠ¥å‘Š
open coverage/index.html  # macOS
xdg-open coverage/index.html  # Linux
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œï¼ˆä»Šå¤©ï¼‰

1. âœ… å®ŒæˆåŸºçº¿æŠ¥å‘Šï¼ˆæœ¬æ–‡æ¡£ï¼‰
2. ğŸ”„ ä¿®å¤ useSoundEffect.test.tsï¼ˆ7ä¸ªå¤±è´¥ï¼‰
3. ğŸ”„ ä¿®å¤ createConnectionSlice.test.tsï¼ˆ1ä¸ªé”™è¯¯ï¼‰
4. ğŸ”„ ç”Ÿæˆå®Œæ•´coverageæŠ¥å‘Š
5. ğŸ”„ å¼€å§‹é˜¶æ®µ2.2ï¼šæ ¸å¿ƒé€»è¾‘æµ‹è¯•å¢å¼º

### æ˜å¤©æ‰§è¡Œ

6. ç»§ç»­é˜¶æ®µ2.2ï¼šè¡¥å……æ ¸å¿ƒé€»è¾‘æµ‹è¯•ç”¨ä¾‹
7. å¼€å§‹é˜¶æ®µ2.3ï¼šçŠ¶æ€ç®¡ç†æµ‹è¯•å¢å¼º

---

**åŸºçº¿å»ºç«‹æ—¶é—´**: 2026-01-09 17:30
**ä¸‹æ¬¡æ›´æ–°**: é˜¶æ®µ2å®Œæˆåï¼ˆé¢„è®¡2026-01-11ï¼‰
**è´Ÿè´£äºº**: Claude Code (è‡ªä¸»æ‰§è¡Œ)

---

## é™„å½•ï¼šæµ‹è¯•æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒé€»è¾‘æµ‹è¯• (src/lib/)
- chainReaction.test.ts âœ…
- distributionAnalysis.test.ts âœ…
- gameLogic.test.ts âœ…
- infoGeneration.test.ts âœ…
- reportGenerator.test.ts âœ…
- supabaseService.test.ts âœ…
- tests/gameLogic.extra.test.ts âœ…

### çŠ¶æ€ç®¡ç†æµ‹è¯• (src/store/)
- createGameSlice.test.ts âœ…
- createUISlice.test.ts âœ…
- createConnectionSlice.test.ts âš ï¸
- slices/game/core.test.ts âœ…
- slices/game/flow.test.ts âœ…
- slices/game/roles.test.ts âœ…
- slices/game/utils.test.ts âœ…

### Hooksæµ‹è¯• (src/hooks/)
- useActionConfirmation.test.ts âœ…
- useGameInteractions.test.ts âœ…
- useNomination.test.ts âœ…
- useSoundEffect.test.ts âŒ
- useLongPress.test.ts âœ…

### ç»„ä»¶æµ‹è¯• (src/components/game/)
- [24ä¸ªç»„ä»¶æµ‹è¯•æ–‡ä»¶ï¼Œ98%é€šè¿‡ç‡]
