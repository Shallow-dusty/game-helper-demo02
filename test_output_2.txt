
> grimoire-web@0.8.0 test
> vitest


[1m[44m DEV [49m[22m [34mv4.0.14 [39m[90mE:/coding/Antigravity/game-helper-demo02[39m

 [31mé‰‚?[39m src/store/utils.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 15[2mms[22m[39m
       [32mé‰?[39m should remove sensitive data from public state[32m 2[2mms[22m[39m
       [32mé‰?[39m should preserve sensitive data in secret state[32m 0[2mms[22m[39m
       [32mé‰?[39m should merge secret state back into public state[32m 2[2mms[22m[39m
       [32mé‰?[39m should allow ST to see everything[32m 1[2mms[22m[39m
       [32mé‰?[39m should allow player to see their own seenRole but hide realRole if different[32m 0[2mms[22m[39m
       [32mé‰?[39m should hide sensitive info from other players[32m 0[2mms[22m[39m
       [32mé‰?[39m should allow Spy to see real roles[32m 0[2mms[22m[39m
[31m       [31mè„³[31m should hide private system messages from other players[39m[32m 8[2mms[22m[39m
       [32mé‰?[39m should show private system messages to the recipient[32m 0[2mms[22m[39m
 [32mé‰?[39m src/store/slices/createConnectionSlice.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mé‰?[39m src/lib/gameLogic.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mé‰?[39m src/hooks/useLongPress.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mé‰?[39m src/store/slices/createAISlice.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mé‰?[39m tests/integration/gameFlow.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m

éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹† Failed Suites 1 éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³?[39m

 FAIL  src/store/slices/createGameSlice.test.ts [ src/store/slices/createGameSlice.test.ts ]
Error: Transform failed with 1 error:
E:/coding/Antigravity/game-helper-demo02/src/store/slices/createGameSlice.test.ts:15:5: ERROR: Expected ";" but found ")"
  Plugin: vite:esbuild
  File: E:/coding/Antigravity/game-helper-demo02/src/store/slices/createGameSlice.test.ts:15:5
  
  Expected ";" but found ")"
  13 |        upsert: () => ({ error: null }),
  14 |        insert: () => ({ error: null }),
  15 |      }),
     |       ^
  16 |      channel: () => ({
  17 |        on: () => ({ subscribe: () => { /* empty */ } }),
  
 é‰‚?[22m failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 é‰‚?[22m node_modules/esbuild/lib/main.js:736:50
 é‰‚?[22m responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 é‰‚?[22m handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 é‰‚?[22m Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†[1/2]éˆ³?[22m


éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³?[39m Failed Tests 1 éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³?[39m

 FAIL  src/store/utils.test.ts > utils > filterGameStateForUser (Privacy) > should hide private system messages from other players
AssertionError: expected [ { id: '1', éˆ¥?7) } ] to have a length of +0 but got 1

- Expected
+ Received

- 0
+ 1

 é‰‚?[22m src/store/utils.test.ts:125:37
    123|           // User who is NOT the recipient
    124|           const filtered = filterGameStateForUser(stateWithPrivateMsg,éˆ¥?    125|           expect(filtered.messages).toHaveLength(0);
       |                                     ^
    126|       });
    127| 

éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†éˆ³îˆ—å¹†[2/2]éˆ³?[22m


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m5 passed[39m[22m[90m (7)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m21 passed[39m[22m[90m (22)[39m
[2m   Start at [22m 01:39:33
[2m   Duration [22m 2.08s[2m (transform 692ms, setup 1.23s, import 1.05s, tests 54ms, environment 8.54s)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
